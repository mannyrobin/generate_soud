{"version":3,"sources":["./src/app/history/history.page.html","./src/app/history/history.module.ts","./src/app/history/history.page.scss","./src/app/history/history.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,yOAA0K,8BAA8B,gJAAgJ,+BAA+B,uFAAuF,sBAAsB,uFAAuF,sBAAsB,0MAA0M,mBAAmB,uFAAuF,qBAAqB,uFAAuF,oBAAoB,mH;;;;;;;;;;;;;;;;;;;;;;ACAr+B;AACN;AACc;AACV;AACS;AAET;AAE7C,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,yDAAW;KACvB;CACF,CAAC;AAaF;IAAA;IAAgC,CAAC;IAApB,iBAAiB;QAX7B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,mEAAe;gBACf,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE;gBACZ,yDAAW;aACZ;SACF,CAAC;OACW,iBAAiB,CAAG;IAAD,wBAAC;CAAA;AAAH;;;;;;;;;;;;;AC1B9B;AAAe,0EAAW,eAAe,mBAAmB,GAAG,6CAA6C,+iB;;;;;;;;;;;;;;;;;;;ACAd;AAEnB;AACjB;AAQ1D;IAGE,qBACU,kBAAqC,EACrC,UAAqB,EACrB,kBAAqC;QAFrC,uBAAkB,GAAlB,kBAAkB,CAAmB;QACrC,eAAU,GAAV,UAAU,CAAW;QACrB,uBAAkB,GAAlB,kBAAkB,CAAmB;IAE/C,CAAC;IAED,8BAAQ,GAAR;QACE,IAAI,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAED,oCAAc,GAAd,UAAgB,GAAW;QAA3B,iBAOC;QANC,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,GAAG,CAAC;aACxC,SAAS,CAAC,cAAI;YACb,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YAEpB,KAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE,CAAC;QAC1C,CAAC,CAAC,CAAC;IACP,CAAC;IAEa,0BAAI,GAAlB;;;;;4BACmB,qBAAM,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,oBAAoB,EAAE,EAAE,CAAC;;wBAArE,QAAQ,GAAG,SAA0D;wBAE3E,IAAI,CAAC,QAAQ,EAAE;4BACb,OAAO,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;4BAEzC,sBAAO;yBACR;wBAED,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;4BAC5B,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;yBAChD;;;;;KACF;;gBA/B6B,+DAAiB;gBACzB,qEAAS;gBACD,sFAAiB;;IANpC,WAAW;QANvB,+DAAS,CAAC;YACT,QAAQ,EAAE,aAAa;YACvB,+MAAkC;YAElC,eAAe,EAAE,qEAAuB,CAAC,MAAM;;SAChD,CAAC;+EAK8B,+DAAiB;YACzB,qEAAS;YACD,sFAAiB;OANpC,WAAW,CAoCvB;IAAD,kBAAC;CAAA;AApCuB","file":"history-history-module.js","sourcesContent":["export default \"<ion-content>\\n  <div class=\\\"wrap_of_main_structure wrap_height\\\">\\n    <div class=\\\"right_content purch_content\\\">\\n      <div class=\\\"purchase_hist\\\">\\n        <h2>{{ \\\"buyHistory\\\" | translate }}</h2>\\n\\n        <div class=\\\"inn_purchase\\\">\\n          <div class=\\\"head_purch\\\">\\n            <div class=\\\"purch_desc\\\">\\n              <p>{{ \\\"historyDesc\\\" | translate }}</p>\\n            </div>\\n\\n            <div class=\\\"purch_date\\\">\\n              <p>{{ 'date' | translate }}</p>\\n            </div>\\n\\n            <div class=\\\"purch_cost\\\">\\n              <p>{{ 'cost' | translate }}</p>\\n            </div>\\n          </div>\\n\\n          <div\\n            *ngFor=\\\"let coupon of coupons\\\"\\n            class=\\\"elem_purch\\\">\\n            <div class=\\\"purch_desc\\\">\\n              <p>{{ coupon.packname }}</p>\\n            </div>\\n\\n            <div class=\\\"purch_date\\\">\\n              <p>{{ coupon.created_at }}</p>\\n            </div>\\n\\n            <div class=\\\"purch_cost\\\">\\n              <p>{{ coupon.packprice }}</p>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n</ion-content>\\n\"","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { HistoryPage } from './history.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistoryPage,\n  },\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TranslateModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n  ],\n  declarations: [\n    HistoryPage,\n  ],\n})\nexport class HistoryPageModule {}\n","export default \"ion-menu {\\n  width: 25%;\\n  display: block;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaGlzdG9yeS9EOlxcQmFja3VwXFxEZXZlbG9wbWVudFxcV29ya19Kb2JzXFxGcmVlbGFuY2luZ1xcT3V0XFxBbmd1bGFyX3NvdW5kXFxBcmNoaXZlL3NyY1xcYXBwXFxoaXN0b3J5XFxoaXN0b3J5LnBhZ2Uuc2NzcyIsInNyYy9hcHAvaGlzdG9yeS9oaXN0b3J5LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFVBQUE7RUFDQSxjQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9oaXN0b3J5L2hpc3RvcnkucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLW1lbnUge1xuICB3aWR0aDogMjUlO1xuICBkaXNwbGF5OiBibG9jaztcbn1cbiIsImlvbi1tZW51IHtcbiAgd2lkdGg6IDI1JTtcbiAgZGlzcGxheTogYmxvY2s7XG59Il19 */\"","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\n\nimport { CouponsApiService } from '../shared/services/coupons.api.service';\nimport { DbService } from '../shared/services/db.service';\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.page.html',\n  styleUrls: ['./history.page.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class HistoryPage implements OnInit {\n  public coupons: any[];\n\n  constructor (\n    private _changeDetectorRef: ChangeDetectorRef,\n    private _dbService: DbService,\n    private _couponsApiService: CouponsApiService,\n  ) {\n  }\n\n  ngOnInit (): void {\n    this.init();\n  }\n\n  getCouponsUser (uid: string): void {\n    this._couponsApiService.getCouponsUser(uid)\n      .subscribe(data => {\n        this.coupons = data;\n\n        this._changeDetectorRef.detectChanges();\n      });\n  }\n\n  private async init (): Promise<void> {\n    const userData = await this._dbService.executeSql('SELECT * FROM user', []);\n\n    if (!userData) {\n      console.error('ERROR: no user in table');\n\n      return;\n    }\n\n    if (userData.rows.length > 0) {\n      this.getCouponsUser(userData.rows.item(0).uid);\n    }\n  }\n}\n"],"sourceRoot":"webpack:///"}